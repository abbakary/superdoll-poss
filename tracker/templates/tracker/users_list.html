{% extends 'tracker/base.html' %} {% load date_filters %} {%load static%} {% block title %}Users{% endblock %} {% block content %} <div class="container-fluid"> <div class="page-title"><div class="row"><div class="col-6"><h4>Users</h4></div><div class="col-6"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="{% url 'tracker:dashboard' %}">Home</a></li><li class="breadcrumb-item active">Users</li></ol></div></div></div> </div> <div class="container-fluid"> <div class="card mb-3"><div class="card-body d-flex justify-content-between align-items-center"><form class="d-flex gap-2" method="get"><input class="form-control" type="text" name="q" value="{{ q }}" placeholder="Search username or name"><button class="btn btn-primary">Search</button></form><a class="btn btn-success" href="{% url 'tracker:user_create' %}">Add User</a></div></div> <div class="card"><div class="card-body p-0"><div class="table-responsive"><table class="table mb-0" id="usersTable"><thead><tr><th>Username</th><th>Name</th><th>Email</th><th>Joined</th><th>Active</th><th>Staff</th><th class="text-end">Actions</th></tr></thead><tbody>{% for u in users %}<tr><td>{{ u.username }}</td><td>{{ u.first_name }} {{ u.last_name }}</td><td>{{ u.email }}</td><td>{{ u.date_joined|date:'Y-m-d' }}</td><td>{% if u.is_active %}<span class="badge bg-success">Active</span>{% else %}<span class="badge bg-secondary">Inactive</span>{% endif %}</td><td>{% if u.is_staff %}<span class="badge bg-info text-dark">Staff</span>{% else %}<span class="badge bg-light text-dark">User</span>{% endif %}</td><td class="text-end"><div class="dropdown d-inline-block"><button class="btn btn-sm btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown">Actions</button><ul class="dropdown-menu dropdown-menu-end"><li><a class="dropdown-item" href="{% url 'tracker:user_edit' u.id %}"><i class="fa fa-edit me-2"></i>Edit</a></li><li><form method="post" action="{% url 'tracker:user_toggle_active' u.id %}" class="px-3 py-1 m-0">{% csrf_token %}<button class="btn btn-link p-0">{% if u.is_active %}<i class="fa fa-ban me-2"></i>Deactivate{% else %}<i class="fa fa-check me-2"></i>Activate{% endif %}</button></form></li><li><form method="post" action="{% url 'tracker:user_reset_password' u.id %}" class="px-3 py-1 m-0" onsubmit="return confirm('Reset password for {{ u.username }}?');">{% csrf_token %}<button class="btn btn-link p-0"><i class="fa fa-key me-2"></i>Reset Password</button></form></li><li><hr class="dropdown-divider"></li><li><a class="dropdown-item" href="{% url 'tracker:audit_logs' %}?q={{ u.username }}"><i class="fa fa-stream me-2"></i>Track Activity</a></li></ul></div></td></tr>{% empty %}<tr><td colspan="7" class="text-center p-4">No users</td></tr>{% endfor %}</tbody></table></div></div></div> </div> {% endblock %} {% block extra_js %} <script src="{% static 'assets/js/datatable/datatables/jquery.dataTables.min.js' %}"></script> <script src="{% static 'assets/js/datatable/datatables/datatable.custom.js' %}"></script> <script>$(function(){ $('#usersTable').DataTable({ pageLength: 20, order:[[3,'desc']] }); });</script> {% endblock %} 
